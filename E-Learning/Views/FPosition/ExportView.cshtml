
@model  List<FValueValidation>
@using E_Learning.Models;


@{
    ELEARNINGEntities db = new ELEARNINGEntities();
    int ID = ViewBag.ID;
    var pheduyet = db.KNL_PheDuyetKNL.Where(x => x.ID == ID).FirstOrDefault();
    var nguoiduyet = db.NhanViens.Where(x => x.ID == pheduyet.ID_NguoiDuyet).FirstOrDefault();
    DateTime NgayTao = pheduyet.NgayTrinhKy.Value;

}
@{
    ViewBag.Title = "PrintTestView";
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Khung năng lực</title>
    <style>
        body {
            font-family: 'Times New Roman';
        }

        table {
            border-spacing: 0;
            border-collapse: collapse;
            width: 100%;
        }

        td {
            border: 0.5px solid black;
            padding: 5px;
            width: auto; /* Đảm bảo các cột không bị "scale" */
            height: auto; /* Đảm bảo chiều cao không bị co dãn */
        }

        th {
            border: 0.5px solid black ;
            padding: 5px;
            width: auto; /* Đảm bảo các cột không bị "scale" */
            height: auto; /* Đảm bảo chiều cao không bị co dãn */
        }
    </style>
</head>
<body>
    <div style="display: flex; flex-wrap: wrap;">
        <div style="width: 100%; padding-right: 15px; padding-left: 15px;position: relative; display: flex; flex-direction: column; min-width: 0; word-wrap: break-word; background-clip: border-box;  border-radius: 0.25rem; flex: 0 0 100%; max-width: 100%; ">
            <div style="display: flex; flex-wrap: wrap; margin-right: -15px; margin-left: -15px;">
                <div class="col-md-6" style="float: left; font-weight: bold;max-width:300px">
                    <img alt="Hòa Phát Dung Quất" src="https://elearning.hoaphatdungquat.vn/Content/assets/images/logo-inverse.png" width="200" />
                    <p style="margin-bottom:0px;margin-top:0px">CÔNG TY CỔ PHẦN THÉP</p>
                    <p style="margin-top:2px">HÒA PHÁT DUNG QUẤT</p>
                </div>
                <div class="col-md-6" style="float:right;text-align:right; font-weight: bold; margin-left: auto;">
                    <span>BM.12/QT.04</span>
                    <p style="margin-top: 2px; margin-bottom:0px !important"><span style="font-style:italic;">Ngày hiệu lực:</span> 01/09/2024</p>
                    <p style="margin-top: 2px; "><span style="font-style:italic;">Lần sửa đổi:</span> 01</p>
                </div>
                <div style="flex: 0 0 100%; max-width: 100%; ">
                    <p style="text-align:center; font-weight:bold;font-size:18px;margin-bottom:0px">KHUNG NĂNG LỰC VỊ TRÍ CÔNG VIỆC</p>
                </div>
                <div style="flex: 0 0 100%; max-width: 100%; ">
                    <div style="font-weight: bold; font-size: 14px; margin: 2px 0px 0px 0px; ">1. Thông tin chung</div>
                    <div style="font-weight: bold; font-size: 14px; margin: 2px 0px 0px 0px; ">1.1 Vị trí công việc: @ViewBag.TenViTri</div>
                    <div style="font-weight: bold; font-size: 14px; margin: 2px 0px 0px 0px; ">1.2 Bộ phận: @ViewBag.TenPB</div>
                    <div style="font-weight: bold; font-size: 14px; margin: 2px 0px 0px 0px; ">1.3 Lần cập nhật thứ: 01</div>
                </div>
                <div class="col-md-12">
                    <p style="font-size: 14px; font-weight: bold;">2. Khung năng lực chi tiết</p>
                </div>

            </div>
        </div>
    </div>
    <div>
        <table style="font-size: 12px ">
            <thead>
                <tr>
                    <th class="text-center" style=" text-align:center;width:50px !important " rowspan="2">STT</th>
                    <th class="text-center" style="  text-align:center;width:350px !important ;max-width:400px !important" rowspan="2">Yêu cầu năng lực</th>
                    <th class="text-center" colspan="7" style="  text-align: center">Yêu cầu mức độ năng lực cần đạt được (ghi “x” vào mức độ yêu cầu)</th>
                </tr>
                <tr>
                    <th class="text-center" style="  text-align: center" width="150px">Không đánh giá</th>
                    <th class="text-center" style="  text-align: center" width="100px">1</th>
                    <th class="text-center" style="  text-align: center" width="100px">2</th>
                    <th class="text-center" style="  text-align: center" width="100px">3</th>
                    <th class="text-center" style="  text-align: center" width="100px">4</th>
                    <th class="text-center" style="  text-align: center" width="100px">5</th>
                    <th class="text-center" style="  text-align: center " width="100px">6</th>
                </tr>
            </thead>

            <tbody>
                <tr>
                    <td class="font-weight-bold font-size-lg" style="  font-weight: bold;   text-align: center">I</td>
                    <td colspan="8" style="  font-weight: bold;">Năng lực chung</td>
                </tr>
                @{ int b = 0;}
                @for (int i = 0; i < Model.Count; i++)
                {
                    if (Model[i].IDLoaiNL == 1)
                    {
                        if (Model[i].IsDanhGia == 1)
                        {
                            <tr>
                                <td class="text-center" style="     text-align: center"> @(b+1)</td>
                                <td class="font-size-xlg" style="  ">@Model[i].TenNL</td>
                                <td style="  font-weight: bold;  text-align: center" class="text-center; text-align: center">@(@Model[i].DinhMuc == 0 ? "X" :"")</td>
                                <td style="  font-weight: bold;   text-align: center" class="text-center; text-align: center">@(@Model[i].DinhMuc == 1 ? "X" :"") </td>
                                <td style="  font-weight: bold;   text-align: center" class="text-center; text-align: center">@(@Model[i].DinhMuc == 2 ? "X" :"") </td>
                                <td style="  font-weight: bold;   text-align: center" class="text-center; text-align: center">@(@Model[i].DinhMuc == 3 ? "X" :"")</td>
                                <td style="  font-weight: bold;   text-align: center" class="text-center; text-align: center">@(@Model[i].DinhMuc == 4 ? "X" :"")</td>
                                <td style="  font-weight: bold;   text-align: center" class="text-center; text-align: center">@(@Model[i].DinhMuc == 5 ? "X" :"")</td>
                                <td style="  font-weight: bold; text-align: center" class="text-center">@(@Model[i].DinhMuc == 6 ? "X" :"")</td>
                                @*<td class="text-center"></td>*@
                            </tr>
                            b++;
                        }
                        else
                        {
                            <tr>
                                <td class="text-center" style="     text-align: center"> @(b+1)</td>
                                <td class="font-size-xlg" style="  ">@Model[i].TenNL</td>
                                <td style="  font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 0 ? "X" :"")</td>
                                <td style="  font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 1 ? "X" :"") </td>
                                <td style="  font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 2 ? "X" :"") </td>
                                <td style="  font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 3 ? "X" :"")</td>
                                <td style="  font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 4 ? "X" :"")</td>
                                <td style="  font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 5 ? "X" :"")</td>
                                <td style="  font-weight: bold; text-align: center" class="text-center">@(@Model[i].DinhMuc == 6 ? "X" :"")</td>
                                @*<td class="text-center"></td>*@
                            </tr>
                            b++;
                        }

                    }

                }
                <tr>
                    <td class="font-weight-bold font-size-lg" style=" font-weight: bold; text-align: center">II</td>
                    <td colspan="8" style=" font-weight: bold;">Năng lực chuyên môn</td>
                </tr>
                @{ int a = 0; int cm = 0; int cou = 0; }
                @foreach (var item in ViewBag.IDLoaiNL)
                {

                    <tr>
                        <th class="text-center" style=" font-weight: bold; text-align: center">@(cm+1)</th>
                        <th colspan="8" class="font-weight-bold" style=" font-weight: bold;">@item.Text</th>
                    </tr>
                    for (int i = 0; i < Model.Count; i++)
                    {
                        if (Model[i].IDLoaiNL.ToString() == @item.Value)
                        {
                            if (Model[i].IDLoaiNL != 1 && Model[i].IDLoaiNL != 2)
                            {
                                <tr>
                                    <td class="text-center" style=" text-align: center"> @(cm+1 +"."+ (cou+1))</td>
                                    <td class="font-size-xlg" style=" ">@Model[i].TenNL</td>
                                    <td style=" font-weight: bold;  text-align: center" class="text-center">@(@Model[i].DinhMuc == 0 ? "X" :"")</td>
                                    <td style=" font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 1 ? "X" :"") </td>
                                    <td style=" font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 2 ? "X" :"") </td>
                                    <td style=" font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 3 ? "X" :"")</td>
                                    <td style=" font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 4 ? "X" :"")</td>
                                    <td style=" font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 5 ? "X" :"")</td>
                                    <td style=" font-weight: bold; text-align: center" class="text-center">@(@Model[i].DinhMuc == 6 ? "X" :"")</td>
                                    @*<td class="text-center"></td>*@
                                </tr>
                                cou++;
                            }
                        }
                    }
                    cm++; cou = 0;
                }
                <tr>
                    <td class="font-weight-bold font-size-lg" style="  font-weight: bold;   text-align: center">III</td>
                    <td colspan="8" style="  font-weight: bold;">Năng lực quản lý</td>
                </tr>
                @{ int c = 0;int cu = Model.Where(x => x.IDLoaiNL == 2).Count(); }
                @for (int i = 0; i < Model.Count; i++)
                {

                    if (Model[i].IDLoaiNL == 2)
                    {
                        if (Model[i].IsDanhGia == 1)
                        {
                            <tr>
                                @if (c + 1 == cu)
                                {
                                    <td class="text-center font-size-xlg" style="    text-align: center"> @(c+1)</td>
                                    <td class="font-size-xlg" style="    ">@Model[i].TenNL</td>
                                    <td style="   font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 0 ? "X" :"")</td>
                                    <td style="   font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 1 ? "X" :"") </td>
                                    <td style="   font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 2 ? "X" :"") </td>
                                    <td style="   font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 3 ? "X" :"")</td>
                                    <td style="   font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 4 ? "X" :"")</td>
                                    <td style="   font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 5 ? "X" :"")</td>
                                    <td style="  font-weight: bold; text-align: center " class="text-center">@(@Model[i].DinhMuc == 6 ? "X" :"")</td>
                                }
                                else
                                {
                                    <td class="text-center" style="  text-align: center"> @(c+1)</td>
                                    <td class="font-size-xlg" style="   ">@Model[i].TenNL</td>
                                    <td style="  font-weight: bold;   text-align: center">@(@Model[i].DinhMuc == 0 ? "X" :"")</td>
                                    <td style="  font-weight: bold;   text-align: center">@(@Model[i].DinhMuc == 1 ? "X" :"") </td>
                                    <td style="  font-weight: bold;   text-align: center">@(@Model[i].DinhMuc == 2 ? "X" :"") </td>
                                    <td style="  font-weight: bold;   text-align: center">@(@Model[i].DinhMuc == 3 ? "X" :"")</td>
                                    <td style="  font-weight: bold;   text-align: center">@(@Model[i].DinhMuc == 4 ? "X" :"")</td>
                                    <td style="  font-weight: bold;   text-align: center">@(@Model[i].DinhMuc == 5 ? "X" :"")</td>
                                    <td style="  font-weight: bold; text-align: center " class="text-center">@(@Model[i].DinhMuc == 6 ? "X" :"")</td>
                                }
                            </tr>
                            c++;
                        }
                        else
                        {
                        <tr>

                            @if (c + 1 == cu)
                            {
                                <td class="text-center font-size-xlg" style="     text-align: center"> @(c+1)</td>
                                <td class="font-size-xlg" style="   ">@Model[i].TenNL</td>
                                <td style="   font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 0 ? "X" :"")</td>
                                <td style="   font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 1 ? "X" :"") </td>
                                <td style="   font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 2 ? "X" :"") </td>
                                <td style="   font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 3 ? "X" :"")</td>
                                <td style="   font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 4 ? "X" :"")</td>
                                <td style="   font-weight: bold;   text-align: center" class="text-center">@(@Model[i].DinhMuc == 5 ? "X" :"")</td>
                                <td style="  font-weight: bold; text-align: center " class="text-center">@(@Model[i].DinhMuc == 6 ? "X" :"")</td>
                            }
                            else
                            {
                                <td class="text-center" style="  text-align: center"> @(c+1)</td>
                                <td class="font-size-xlg" style="   ">@Model[i].TenNL</td>
                                <td style="  font-weight: bold;   text-align: center">@(@Model[i].DinhMuc == 0 ? "X" :"")</td>
                                <td style="  font-weight: bold;   text-align: center">@(@Model[i].DinhMuc == 1 ? "X" :"") </td>
                                <td style="  font-weight: bold;   text-align: center">@(@Model[i].DinhMuc == 2 ? "X" :"") </td>
                                <td style="  font-weight: bold;   text-align: center">@(@Model[i].DinhMuc == 3 ? "X" :"")</td>
                                <td style="  font-weight: bold;   text-align: center">@(@Model[i].DinhMuc == 4 ? "X" :"")</td>
                                <td style="  font-weight: bold;   text-align: center">@(@Model[i].DinhMuc == 5 ? "X" :"")</td>
                                <td style="  font-weight: bold; text-align: center " class="text-center">@(@Model[i].DinhMuc == 6 ? "X" :"")</td>
                            }

                            @*<td></td>*@
                        </tr>
                            c++;
                        }

                    }

                }
                @*<tr>
                        <td style="  " class="text-center">1</td>
                        <td style="  "> @(NhomNL?.NoiDung ?? "")</td>
                        <td style="  ">@Model.TenNoiDungDT</td>
                        <td style="  ">@Model.chiTietNhuCauDTTHView.DoiTuongDT</td>
                        <td style="   text-align:center" class="text-center">@Model.chiTietNhuCauDTTHView.SoLuongNguoi</td>
                        @if (GiangVien == null)
                        {
                            <td style="  "></td>
                            <td style="  ">@Model.chiTietNhuCauDTTHView.TenGiangVien</td>
                        }
                        else
                        {
                            <td style="  ">@GiangVien.MaNV</td>
                            <td style="  ">@GiangVien.HoTen</td>
                        }

                        <td style="  ">@Model.chiTietNhuCauDTTHView.TenViTri</td>
                        <td style="  ">@Model.chiTietNhuCauDTTHView.DonViDT</td>
                        <td style="  ">@PPhapDT.TenPhuongPhapDT</td>
                        <td style="  ">@LVDT.TenLVDT</td>
                        <td style="   text-align:center">@Model.chiTietNhuCauDTTHView.ThoiGianDT</td>
                        <td style="   text-align: center">@Model.chiTietNhuCauDTTHView.ThoiLuong</td>
                        <td style="  ">@Model.chiTietNhuCauDTTHView.DiaDiemDT</td>
                        <td style="  ">@Model.chiTietNhuCauDTTHView.GhiChu</td>
                    </tr>*@
            </tbody>
        </table>

    </div>
    <div class="col-md-12" style="display: flex; flex-direction: row-reverse; float:right">
        <div class="col-4"> <p style="font-style:italic;font-size:12px">Quảng Ngãi, ngày @NgayTao.Day tháng @NgayTao.Month năm @NgayTao.Year </p></div>
    </div>
    <div style="flex: 0 0 100%; max-width: 100%; ">

        <table style="border:0px">
            <tr>
                <th style="border:0px;text-align:center"></th>
                <th style="border: 0px; text-align: center"></th>
                <th style="border: 0px; text-align: center"></th>
                <th style="border: 0px; text-align: center">Phê duyệt</th>
            </tr>
            <tr>
                <td style="border: 0px; text-align: center;width:25%">
                </td>
                <td style="border: 0px; text-align: center;width:25%">
                </td>
                <td style="border: 0px; text-align: center; width: 25%">
                </td>
                <td style="border: 0px; text-align: center; width: 25%">
                    @if (nguoiduyet != null)
                    {
                        if (pheduyet.TinhTrang == 1 || true)
                        {
                            string absolutePath = Server.MapPath(nguoiduyet.ChuKy);
                            <div style="height:50px"><img height="50" width="150" alt="Hòa Phát Dung Quất" src="@absolutePath" /></div>
                            <div style="font-weight:bold">@nguoiduyet.HoTen</div>
                        }
                        @*else if (CapBP.TinhTrangDuyet == 0 && pns != null)
                        {
                            <div style="height: 50px; display: flex; align-items: center; justify-content: center;" class="text-danger">
                                @(Model.TinhTrang != 3? "Chưa ký":"")
                            </div>
                            <div style="font-weight:bold">@pns.HoTen</div>
                        }
                        else if (CapBP.TinhTrangDuyet == 2 && pns != null)
                        {
                            <div style="height: 50px; display: flex; align-items: center; justify-content: center;" class="text-danger">Đã từ chối</div>
                            <div style="font-weight:bold">@pns.HoTen</div>
                        }*@
                    }
                </td>
            </tr>
        </table>
        @*<div id="list_vt" style="width:100%">
            <div style="margin-left:2%;">
                <p style="font-size:10px">
                    <b>
                        Ghi chú:
                    </b><br />
                    – Sau khi Nhu cầu đào tạo được phê duyệt không quá 02 ngày, đầu mối tại BP có nhu cầu đào tạo gửi email Nhu cầu đào tạo đến Nhân viên Nhân sự (chuyên trách BP), Nhân viên Đào tạo – P.NS, Kỹ thuật viên P.CHN hoặc chuyển tiếp văn bản qua hệ thống E–Office để nắm thông tin và phối hợp;<br />
                    – Kính gửi: Tùy vào các nội dung theo phân nhiệm, trình đến cấp phê duyệt phù hợp và có thể để trống hoặc xóa các thành phần còn lại. Chọn một trong ba theo phân nhiệm trình ký: Ban Giám đốc; Trưởng bộ phận; Phòng Nhân sự (chọn theo list tự động);<br />
                    – Bộ phận: Tùy vào nội dung đào tạo có thể là một hoặc nhiều BP khác nhau, trong đó cả Bộ phận đề nghị đào tạo và BP có địa điểm, giảng viên tổ chức đào tạo; <br />
                    – Nhóm năng lực: Chọn một trong ba nhóm năng lực: Năng lực chung; Năng lực Chuyên môn; Năng lực Quản lý (chọn theo list tự động); <br />
                    – Tên khóa đào tạo: Là tên của nội dung cần đào tạo, thể hiện ngắn gọn và nêu bật được nội dung cần đào tạo hoặc tên vị trí công việc cần đào tạo; <br />
                    – Đối tượng học viên: Ghi ngắn gọn các nhóm đối tượng học viên hoặc tên vị trí công việc; <br />
                    – Thông tin giảng viên: Nếu khóa đào tạo dùng giảng viên thuê ngoài thì ghi “Thuê ngoài” hoặc “Tên đơn vị/ đối tác" nếu đã xác định được đơn vị đào tạo; nếu Giảng viên nội bộ thì ghi đầy đủ thông tin; <br />
                    - Phương pháp đào tạo: Chỉ lập Nhu cầu đào tạo đối với phương pháp đào tạo: Mở lớp đào tạo tập trung; Hội thảo, trao đổi, chia sẻ kinh nghiệm (chọn theo list tự động). Nếu đào tạo theo Phương pháp Mở lớp đào tạo trên hệ thống E-Learning (cột thời lượng đào tạo là 01 giờ và cột ghi chú: Hệ thống E-Learning); <br />
                    – Lĩnh vực đào tạo: An toàn lao động theo luật định/ An toàn lao động khác/ Cơ khí/ Điện/ Công nghệ/ Nghiệp vụ khác; <br />
                    – Thời lượng đào tạo dự kiến: Số giờ để đào tạo hết nội dung chương trình đào tạo đối với một lượt đào tạo; <br />
                    – Địa điểm đào tạo: Ghi rõ cụ thể vị trí: Lý thuyết: Phòng họp/ Phòng giao ca … Thực hành: Khu vực làm việc của Tổ - Phân xưởng. Nếu địa điểm ngoài Công ty thì ghi rõ và đầy đủ địa điểm; <br />
                    – Đối với nhu cầu đào tạo mất phí, có sự tham gia của giảng viên bên ngoài hoặc phải cử CBNV đi đào tạo tại địa điểm bên ngoài Công ty: T/PBP, đơn vị đại diện các bên liên quan ký trình tới cấp BGĐ Công ty.<br />
                </p>
            </div>
        </div>*@

    </div>
</body>
</html>



@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using E_Learning.Models
@model List<EClassroomValidation>
<link href="~/Content/assets/css/PagedList.css" rel="stylesheet" />

@if (TempData["msgSuccess"] != null)
{
    @Html.Raw(TempData["msgSuccess"])
}
@if (TempData["msgError"] != null)
{
    @Html.Raw(TempData["msgError"])
}


<div class="app-main__outer">
    <div class="app-main__inner">
         @foreach (var item in Model) {
        <div class="app-page-title">
            <div class="page-title-wrapper">
                <div class="page-title-heading">
                    <div class="page-title-icon">
                        <i class="pe-7s-notebook icon-gradient bg-grow-early">
                        </i>
                    </div>
                    <div>
                        @item.TenLH
                        <div class="page-title-subheading">
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="tab-content">
            <div class="row">
                <div class="col-lg-12">
                    <div class="main-card mb-3 card">
                        <div class="card-body">

                            <div class="row" style="padding: 38px 16px;">

                                
                                <div class="col-lg-5" style="">
                                    <div class="">
                                        <h5 class="card-title">Hướng Dẫn Học Tập Trên Hệ Thống E-Learning</h5>

                                        <ul>
                                            <li><p>Học online: Học viên phải xem hết video bài học và nhấn nút <strong>“Hoàn thành”</strong> mới <strong>ghi nhận hoàn thành bài học.</strong></p></li>

                                            <li><p>Học viên phải <strong>hoàn thành bài học online</strong> và <strong>làm bài kiểm tra trắc nghiệm online</strong> mới ghi nhận là hoàn thành khóa học này.</p></li>

                                            <li><p>Học viên không thể tua nhanh video, khi video bị sự cố hoặc lỗi mạng học viên nhấn <strong>pause/play</strong> để tiếp tục.</p></li>

                                            <li><p>Khi đang học online nếu học viên thoát khi chưa <strong>"Hoàn thành"</strong> bài học thì phải vào học lại từ đầu.</p></li>

                                            <li><p>Học viên có thể xem lại nội dung bài học trong thời gian lớp học online đang diễn ra.</p></li>

                                            <li><p>Học viên có thể <strong>làm bài kiểm tra online 3 lần </strong> nếu chưa đạt.</p></li>
                                        </ul>
                                        <div class="widget-content">
                                            <div class="widget-content-wrapper" style="padding: .5rem 0 0;">

                                                <div class="widget-content-left"><strong>Nội dung: </strong></div>
                                                <div class="widget-content-right">@item.TenND</div>

                                            </div>
                                            <div class="widget-content-wrapper" style="padding: .5rem 0 0;">

                                                <div class="widget-content-left"><strong>Lĩnh vực: </strong></div>
                                                <div class="widget-content-right">@item.LinhVuc</div>

                                            </div>
                                            <div class="widget-content-wrapper" style="padding: .5rem 0 0;">

                                                <div class="widget-content-left"><strong>Tài liệu học tập đính kèm: </strong></div>
                                                <div class="widget-content-right">
                                                    @if (item.FileCTDT != null && item.FileCTDT.Length > 0)
                                                    {
                                                        <a href="@item.FileCTDT" target="_blank"><span style="color:red;"><i class="fa fa-file-pdf-o" aria-hidden="true"></i></span> Xem nội dung</a>
                                                    }

                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-7" style="">

                                    <div class="" style="width: 100%; height: auto;">
                                        <div id="myElement">Loading the player...</div>
                                        <script type="text/javascript">
                                                                var playerInstance = jwplayer("myElement");
                                                                playerInstance.setup({
                                                                    file: "@item.VideoLH",
                                                                    image: "@item.ImageLH",
                                                                    autostart: false,
                                                                    controls: true,
                                                                    width: "100%",
                                                                    aspectratio: "16 : 9",
                                                                   // height: 360,
                                                                });
                                        </script>
                                    </div>

                                </div>
                                <div class="" style="position: absolute;bottom: 14px;right: 30px">

                                    @*<a class="" id="" href="@Url.Action("Index" , "EClassroom" , new { id = @item.NVID })">
                                        <button id="back" class="btn-transition btn btn-outline-primary"><i class="fa fa-angle-left" aria-hidden="true"></i> Trở về </button>
                                    </a>*@
                                    @if (@item.XNHT == false)
                                    {
                                        <div id="dddd"></div>
                                        <a class="" id="" href="@Url.Action("CompleteLesson" , "SLesson" , new { id = @item.IDHT })" onclick="">
                                            <button id="target" class="btn-transition btn btn-success">Hoàn thành</button>
                                        </a>
                                    }
                                    else
                                    {
                                        <script>
                                            console.log("Complete");
                                        </script>
                                    }
                                </div>

                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
         }
    </div>
    <div class="app-wrapper-footer">
        <div class="app-footer">
            <div class="app-footer__inner">

            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

    // API JWplayer play complete

    var element = document.getElementById("target");
    element.disabled = true;
    jwplayer().on('complete', function (event) {
        console.log("complete");
        element.disabled = false;

    });

    // JWplayer pause after 5 m play

    //jwplayer().on('play', function (event) {
    //    console.log("play");
    //    setInterval(function Pause () {
    //        jwplayer().pause();
    //        alert("Bạn có đang theo dõi bài học");
    //        jwplayer().play();
    //        clearInterval(Pause);
    //    }, 20000);
    //});

    jwplayer().on('play', function (event) {
        console.log("playt");
        var checkview = setInterval(pause, 300000);
        function pause() {
            jwplayer().pause();
            console.log("auto pause");
            alert("Bạn có đang theo dõi bài học");
            jwplayer().play();
            console.log("auto play");
        }
        jwplayer().on('pause', function (event) {
            console.log("pauset");
            clearInterval(checkview);

        });
    });
    
    // API JWplayer prevent

    var seeking = false;
    var maxPlayPosition = 0;

    jwplayer().on('time', function (event) {
        if (!seeking) {
            maxPlayPosition = Math.max(event.position, maxPlayPosition);
        }
    }).on('seek', function (event) {
        seeking = true;
    }).on('seeked', function (event) {
        var pos = jwplayer().getPosition();

        if (pos > maxPlayPosition) {
            jwplayer().seek(maxPlayPosition);
        }

        seeking = false;
    });


</script>
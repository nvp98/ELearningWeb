@model  List<FValueValidation>
@using E_Learning.Models;
@{
    ViewBag.Title = "TestView";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<style>
    table.table-bordered > thead > tr > th {
        border: 1px solid blue;
    }

    .table-bordered th, .table-bordered td {
        border: 1px solid black;
    }
    .table tbody + tbody {
        border: 1px solid black;
    }

</style>
<div class="app-main__outer">

    <div class="app-main__inner">

        <div class="app-page-title" style="margin-bottom: 5px">
            <div class="page-title-wrapper">
                <div class="page-title-heading">
                    <div class="page-title-icon">
                        <i class="pe-7s-display2 icon-gradient bg-grow-early">
                        </i>
                    </div>
                    <div>
                        Biểu mẫu Khung Năng Lực
                        <div class="page-title-subheading">
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div style="display: flex; margin-bottom: 5px">
            <span class="">

            </span>
            @*<span class="m-l-auto"><a class="btn btn-primary" href="@Url.Action("ExportToPdfFBMView","ConfirmEStudy", new { IDVT = ViewBag.IDVT})">&nbsp;In Khung Năng Lực</a></span>*@
            <span class="m-l-auto"><a class="btn btn-primary fa fa-download" href="@Url.Action("ExportToBMKNL","FPosition", new { IDVT = ViewBag.IDVT})">&nbsp;Tải Khung Năng Lực</a></span>

        </div>

        <div style="display: flex; margin-bottom: 5px">
            <span class="">

            </span>
            @*<span class="m-l-auto"><a class="btn btn-primary" href="@Url.Action("ExportToPdfsss","ConfirmEStudy", new { LHID = Model.IDLH, IDNV = Model.IDNV, IDL = 0})">&nbsp;In biểu mẫu</a></span>*@

        </div>


        <div class="tab-content" style="font-family: 'Times New Roman', Times, serif;">
            <div class="row">
                <div class="card col-md-12 p-5 font-size-xlg">

                    @* Code View *@
                    <div class="HeadTest row">
                        <div class="col-md-6" style="float: left; max-width: 300px; text-align: center; font-weight: bold; font-size: 1.2rem; text-transform: uppercase;">
                            <img alt="Hòa Phát Dung Quất" src="~/Content/assets/images/logo-inverse.png" style="width:90%" />
                            <span class="" style="">Công ty Cổ phần Thép</span>
                            <p class="" style="">Hòa Phát Dung Quất</p>

                        </div>
                        <div class="col-md-6" style="float:right;text-align:right; font-weight: bold; margin-left: auto;">
                            <span>BM.12/QT.04</span>
                            <p><span style="font-style:italic;">Ngày hiệu lực:</span> 01/06/2023</p>
                        </div>
                        <div class="col-md-12">
                            <p style="text-align:center; font-size: 1.8rem;font-weight:bold; text-transform:uppercase;">KHUNG NĂNG LỰC VỊ TRÍ CÔNG VIỆC</p>
                        </div>

                        <div class="col-md-6 font-weight-bold font-size-xlg">
                            <div>1. Thông tin chung</div>
                            <div>1.1 Vị trí công việc: @ViewBag.TenViTri</div>
                            <div>1.2 Bộ phận: @ViewBag.TenPB</div>
                            <div>1.3 Lần cập nhật thứ: 01</div>
                        </div>

                        <div class="col-md-12 font-weight-bold ">
                            <p>2. Khung năng lực chi tiết</p>
                        </div>
                        <div class="col-md-12">
                            <table class="table table-bordered table-hover" id="table" width="100%" cellpadding="0">
                                <thread>
                                    <tr>
                                        <th rowspan="2">STT</th>
                                        <th rowspan="2" class="text-center">Yêu Cầu Năng Lực</th>
                                        <th colspan="8" class="text-center font-weight-bold">Yêu cầu mức độ năng lực cần đạt được (ghi “x” vào mức độ yêu cầu)</th>
                                    </tr>
                                    <tr>
                                        <th class="text-center" width="100px">Không đánh giá</th>
                                        <th class="text-center" width="100px">1</th>
                                        <th class="text-center" width="100px">2</th>
                                        <th class="text-center" width="100px">3</th>
                                        <th class="text-center" width="100px">4</th>
                                        <th class="text-center" width="100px">5</th>
                                        <th class="text-center" width="100px">6</th>
                                        @*<th class="text-center"></th>*@
                                    </tr>
                                </thread>

                                <tbody>
                                    <tr><th colspan="10" class="font-weight-bold font-size-lg">I. Năng lực chung</th></tr>
                                    @{ int b = 0;}
                                    @for (int i = 0; i < Model.Count; i++)
                                    {

                                        @Html.HiddenFor(m => m[i].IDNV)
                                        @Html.HiddenFor(m => m[i].IDNVDG)
                                        @Html.HiddenFor(m => m[i].IDNL)
                                        @Html.HiddenFor(m => m[i].IDVT)
                                        @Html.HiddenFor(m => m[i].TenNL)
                                        @Html.HiddenFor(m => m[i].IDKQ)
                                        @Html.HiddenFor(m => m[i].ThangDG)
                                        @Html.HiddenFor(m => m[i].IDLoaiNL)
                                        @Html.HiddenFor(m => m[i].IsDanhGia)
                                        if (Model[i].IDLoaiNL == 1)
                                        {
                                            if (Model[i].IsDanhGia == 1)
                                            {
                                                <tr>
                                                    <td class="text-center"> @(b+1)</td>
                                                    <td class="font-size-xlg">@Model[i].TenNL</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 0 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 1 ? "X" :"") </td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 2 ? "X" :"") </td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 3 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 4 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 5 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 6 ? "X" :"")</td>
                                                    @*<td class="text-center"></td>*@
                                                </tr>
                                                b++;
                                            }
                                            else
                                            {
                                                <tr>
                                                    <td class="text-center"> @(b+1)</td>
                                                    <td class="font-size-xlg">@Model[i].TenNL</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 0 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 1 ? "X" :"") </td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 2 ? "X" :"") </td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 3 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 4 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 5 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 6 ? "X" :"")</td>
                                                    @*<td class="text-center"></td>*@
                                                </tr>
                                                b++;
                                            }

                                        }

                                    }
                                    <tr><th colspan="10" class="font-weight-bold font-size-lg">II. Năng lực chuyên môn</th></tr>
                                    @{ int a = 0; int cm = 0; int cou = 0; }
                                    @foreach (var item in ViewBag.IDLoaiNL)
                                    {

                                        <tr>
                                            <th class="text-center">@(cm+1)</th>
                                            <th colspan="9" class="font-weight-bold">@item.Text</th>
                                        </tr>
                                        for (int i = 0; i < Model.Count; i++)
                                        {
                                            if (Model[i].IDLoaiNL.ToString() == @item.Value)
                                            {
                                                @Html.HiddenFor(m => m[i].IDNV)
                                                @Html.HiddenFor(m => m[i].IDNVDG)
                                                @Html.HiddenFor(m => m[i].IDNL)
                                                @Html.HiddenFor(m => m[i].IDVT)
                                                @Html.HiddenFor(m => m[i].TenNL)
                                                @Html.HiddenFor(m => m[i].ThangDG)
                                                @Html.HiddenFor(m => m[i].IDLoaiNL)
                                                @Html.HiddenFor(m => m[i].IsDanhGia)
                                                if (Model[i].IDLoaiNL != 1 && Model[i].IDLoaiNL != 2)
                                                {
                                                    <tr>
                                                        <td class="text-center"> @(cm+1 +"."+ (cou+1))</td>
                                                        <td class="font-size-xlg">@Model[i].TenNL</td>
                                                        <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 0 ? "X" :"")</td>
                                                        <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 1 ? "X" :"") </td>
                                                        <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 2 ? "X" :"") </td>
                                                        <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 3 ? "X" :"")</td>
                                                        <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 4 ? "X" :"")</td>
                                                        <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 5 ? "X" :"")</td>
                                                        <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 6 ? "X" :"")</td>
                                                        @*<td class="text-center"></td>*@
                                                    </tr>
                                                    cou++;
                                                }
                                            }
                                        }
                                        cm++; cou = 0;
                                    }

                                    <tr><th colspan="10" class="font-weight-bold font-size-lg">III. Năng lực quản lý</th></tr>
                                    @{ int c = 0;}
                                    @for (int i = 0; i < Model.Count; i++)
                                    {
                                        @Html.HiddenFor(m => m[i].IDNV)
                                        @Html.HiddenFor(m => m[i].IDNVDG)
                                        @Html.HiddenFor(m => m[i].IDNL)
                                        @Html.HiddenFor(m => m[i].IDVT)
                                        @Html.HiddenFor(m => m[i].TenNL)
                                        @Html.HiddenFor(m => m[i].IDKQ)
                                        @Html.HiddenFor(m => m[i].ThangDG)
                                        @Html.HiddenFor(m => m[i].IDLoaiNL)
                                        @Html.HiddenFor(m => m[i].IsDanhGia)
                                        if (Model[i].IDLoaiNL == 2)
                                        {
                                            if (Model[i].IsDanhGia == 1)
                                            {
                                                <tr>
                                                    <td class="text-center"> @(c+1)</td>
                                                    <td class="font-size-xlg">@Model[i].TenNL</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 0 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 1 ? "X" :"") </td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 2 ? "X" :"") </td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 3 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 4 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 5 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 6 ? "X" :"")</td>
                                                    @*<td class="text-center"></td>*@
                                                </tr>
                                                c++;
                                            }
                                            else
                                            {
                                                <tr>
                                                    <td class="text-center font-size-xlg"> @(c+1)</td>
                                                    <td class="font-size-xlg">@Model[i].TenNL</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 0 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 1 ? "X" :"") </td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 2 ? "X" :"") </td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 3 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 4 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 5 ? "X" :"")</td>
                                                    <td class="text-center font-weight-bold">@(@Model[i].DinhMuc == 6 ? "X" :"")</td>
                                                    @*<td></td>*@
                                                </tr>
                                                c++;
                                            }

                                        }

                                    }

                                </tbody>
                            </table>
                        </div>
                    </div>


                    @* End Code View *@
                </div>
            </div>
        </div>
    </div>
</div>

@*<div class="app-wrapper-footer">
        <div class="app-footer">
            <div class="app-footer__inner">

            </div>
        </div>
    </div>*@





